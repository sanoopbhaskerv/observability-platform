server:
  port: 8080

spring:
  application:
    name: demo-service

obs:
  enabled: true
  correlation:
    enabled: true
  http:
    enabled: true
  traces:
    enabled: true
    sample-rate: 1.0 # 100% for dev; use 0.05 in production
    noise-filter:
      excluded-paths:
        - /actuator/health
        - /actuator/info
        - /ping
  metrics:
    enabled: false # opt-in for cost control
  logging:
    enabled: true
    format: text # "json" for production, "text" for dev readability

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus

  # --- Metrics Exporters ---

  # 1. OTLP (Push) - Default
  otlp:
    metrics:
      export:
        enabled: true
        url: http://localhost:4318/v1/metrics
    tracing:
      endpoint: http://localhost:4318/v1/traces

  # 2. Prometheus (Pull) - Enabled by micrometer-registry-prometheus
  prometheus:
    metrics:
      export:
        enabled: true

  # 3. Dynatrace (Native) - Uncomment to enable
  # dynatrace:
  #   metrics:
  #     export:
  #       enabled: true
  #       uri: https://{your-env-id}.live.dynatrace.com
  #       api-token: {your-api-token}
